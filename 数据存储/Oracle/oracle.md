# Oracle

oracle 关键字不区分大小写，但是字段名区分大小写

Oracle ：关系型的数据库 ， 端口号：1521 ，收费（学习是免费的，用于商业要授权）19 万左右， 每年交服务费 效率高， 安全

## 1.连接

```sql
-- cmd 启动 SQL plus 程序的命令行：
sqlplus
--
请输入用户名:  sys as sysdba
输入口令:
```

## 3.用户与授权

```sql
CREATE USER OT IDENTIFIED BY Orcl1234;
```

## 4.库

### 创建

```sql
create database
```

## 5.表

### 创建表

```sql
CREATE TABLE schema_name.table_name (
    column_1 data_type column_constraint,
    column_2 data_type column_constraint,
    ...
    table_constraint
 );

CREATE TABLE ot.persons(
    person_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    first_name VARCHAR2(50) NOT NULL,
    last_name VARCHAR2(50) NOT NULL,
    PRIMARY KEY(person_id)
);
```

> 请注意用户权限问题，必须具有 CREATE TABLE 系统特权才能在模式中创建新表，并使用 CREATE ANY TABLE 系统特权在其他用户的模式中创建新表。除此之外，新表的所有者必须具有包含新表或 UNLIMITED TABLESPACE 系统特权的表空间的配额。

### 通过现有表创建新表

```sql
create table new_table
AS (SELECT * FROM old_table);
```

> 注意: 创建表的同时含有旧表的查到的数据

### 数据类型


```sql
UPDATE STK_ORDER
SET ORDER_TIME = TO_DATE('2023-07-12 19:09:00.774310', 'YYYY-MM-DD HH24:MI:SS.FF')
WHERE CUST_CODE = '31360624' AND REC_SN = '173946';
```
### 字段约束

### 表约束

### 修改表结构

#### 添加一个或多个列

```sql
ALTER TABLE table_name
    ADD column_name type [constraint]
    [ADD column_name2 type [constraint]]
    [ADD column_name2 type [constraint]]
    [......];

ALTER TABLE table_name
ADD (
    column_name type constraint,
    column_name type constraint,
    ...
);
```

要检查表中是否存在列,可以从 `user_tab_cols` 视图查询数据

```sql
SELECT COUNT(*) FROM   user_tab_cols WHERE column_name = 'FIRST_NAME' AND table_name = 'MEMBERS';
```

#### 修改列定义

```sql
ALTER TABLE table_name
    MODIFY column_name type constraint;

ALTER TABLE table_name
    MODIFY (    column_1 type constraint,
                column_1 type constraint,
         ...);
```

#### 删除一列或多列

```sql
ALTER TABLE table_name
    DROP COLUMN column_name;

ALTER TABLE table_name
    DROP (column_1,column_2,...);
```

#### 重命名列

```sql
ALTER TABLE table_name
RENAME COLUMN column_name TO new_name;
```

#### 重命名表

```sql
ALTER TABLE table_name
RENAME TO new_table_name;
```

### 查询

#### 分页排序

```sql
select * from ( 
    select row_.*, rownum rownum_ from (  
        select rowguid,requestid,url,requestMethod,status,fromplatformcode,toplatformcode,insertdate 
            from insurance_interface_log 
            where 1=1   
            ORDER BY insertdate DESC
        ) row_ where rownum <= 10
    ) table_alias where table_alias.rownum_ > 0 ;
```

## 教程

[Oracle 易百教程](https://www.yiibai.com/oracle/quickstart.html)

## 常见问题

### 大小写敏感问题

1. Oracle 默认是大写,也就是说在没有使用"对表名和列名进行限定的时候,表名不过是小写还是大写,最后都默认成了大写
2. 创建表结构时,如果使用 "对表名或列名进行限定后,那么生成的表名或列名严格按照"中的大小写进行匹配,在查询是必须严格匹配.
3. SQL 中如果使用了保留关键字,那么必须对该关键字用"进行限定,SQL 正常的工作.
4. Oracle 对字符串中的内容是大小写敏感的. `select * from table_1 where value='abc'`


