# oracle

oracle 关键字不区分大小写，但是字段名区分大小写

oracle ：关系型的数据库 ， 端口号：1521 ，收费（学习是免费的，用于商业要授权）19 万左右， 每年交服务费 效率高， 安全

## 1.连接

```sql
-- cmd 启动 sql plus 程序的命令行：
sqlplus
--
请输入用户名:  sys as sysdba
输入口令:
```

## 3.用户与授权

```sql
create user <user_name> identified by <user_password>;
```

## 4.库

### 创建

```sql
create database <db_name>
```

## 5.表

### 创建表

```sql
create table [schema_name.]<table_name> (
    <column_name> <data_type> [column_constraint],
    ...,
    table_constraint
);

create table ot.persons(
    person_id number generated by default as identity,
    first_name varchar2(50) not null,
    last_name varchar2(50) not null,
    primary key(person_id)
);
```

> 请注意用户权限问题，必须具有 create table 系统特权才能在模式中创建新表，并使用 create any table 系统特权在其他用户的模式中创建新表。除此之外，新表的所有者必须具有包含新表或 unlimited tablespace 系统特权的表空间的配额。


### 通过现有表创建新表

```sql
create table new_table
as (select * from old_table);
```

> 注意: 创建表的同时含有旧表的查到的数据

### 数据类型


```sql
update stk_order
set order_time = to_date('2023-07-12 19:09:00.774310', 'yyyy-mm-dd hh24:mi:ss.ff')
where cust_code = '31360624' and rec_sn = '173946';
```
### 字段约束

### 表约束

### 修改表结构

#### 添加一个或多个列

```sql
alter table table_name
    add column_name type [constraint]
    [add column_name2 type [constraint]]
    [add column_name2 type [constraint]]
    [......];

alter table table_name
add (
    column_name type constraint,
    column_name type constraint,
    ...
);
```

要检查表中是否存在列,可以从 `user_tab_cols` 视图查询数据

```sql
select count(*) from   user_tab_cols where column_name = 'first_name' and table_name = 'members';
```

#### 修改列定义

```sql
alter table table_name
    modify column_name type constraint;

alter table table_name
    modify (    column_1 type constraint,
                column_1 type constraint,
         ...);
```

#### 删除一列或多列

```sql
alter table table_name   drop column column_name;

alter table table_name   drop (column_1,column_2,...);
```

#### 重命名列

```sql
alter table table_name  rename column column_name to new_name;
```

#### 重命名表

```sql
alter table table_name rename to new_table_name;
```

### 查询

#### 分页排序

```sql
select * from ( 
    select row_.*, rownum rownum_ from (  
        select rowguid,requestid,url,requestmethod,status,fromplatformcode,toplatformcode,insertdate 
            from insurance_interface_log 
            where 1=1   
            order by insertdate desc
        ) row_ where rownum <= 10
    ) table_alias where table_alias.rownum_ > 0 ;
```

## 教程

[oracle 易百教程](https://www.yiibai.com/oracle/quickstart.html)

## 常见问题

### 大小写敏感问题

1. oracle 默认是大写,也就是说在没有使用"对表名和列名进行限定的时候,表名不过是小写还是大写,最后都默认成了大写
2. 创建表结构时,如果使用 "对表名或列名进行限定后,那么生成的表名或列名严格按照"中的大小写进行匹配,在查询是必须严格匹配.
3. sql 中如果使用了保留关键字,那么必须对该关键字用"进行限定,sql 正常的工作.
4. oracle 对字符串中的内容是大小写敏感的. `select * from table_1 where value='abc'`


