# 存储

1. 寄存器 （Registers）**最快**的存储区域，位于 CPU内部  。然⽽，寄存器的数量⼗分有限，所以寄存器根据需求进⾏分配。我们对其没有直接的控制权，也⽆法在⾃⼰的程序⾥找到寄存器存在的踪迹（另⼀⽅⾯，C/C++ 允许开发者向编译器建议寄存器的分配）。
2. 栈内存 （Stack）存在于**常规内存 RAM**（**随机访问存储器**，Random Access Memory）区域中，可通过栈指针获得处理器的直接⽀持。栈指针下移分配内存，上移释放内存，这是⼀种快速有效的内存分配⽅法，速度仅次于寄存器。创建程序时，Java 系统必须准确地知道栈内保存的所有项的⽣命周期。这种约束限制了程序的灵活性。因此，虽然在栈内存上存在⼀些 Java 数据，特别是对象引⽤，但 Java 对象却是保存在堆内存的。
3. 堆内存 （Heap）这是⼀种通⽤的内存池（也在RAM 区域），**所有 Java 对象**都存在于其中。与栈内存不同，编译器不需要知道对象必须在堆内存
上停留多⻓时间。因此，⽤堆内存保存数据更具灵活性。创建⼀个对象时，只需⽤  new  命令实例化对象即可，当执⾏代码时，会⾃动在堆中进⾏内存分配。这种灵活性是有代价的：分配和清理堆内存要⽐栈内存需要更多的时间（如果可以⽤ Java 在栈内存上创建对象，就像在 C++ 中那样的话）。随着时间的推移，Java 的堆内存分配机制现在已经⾮常快，因此这不是⼀个值得关⼼的问题了。
4. 常量存储 （Constant storage）常量值通常**直接放在程序代码中**，因为它们永远不会改变。如需严格保护，可考虑将它们置于只读存储器 ROM （只读存储器，Read Only Memory）中 3 。
5. ⾮ RAM 存储 （Non-RAM storage）数据完全存在于程序之外，在程序未运⾏以及脱离程序控制后依然存在。两个主要的例⼦：（1）序列化对象：对象被转换为字节流，通常被发送到另⼀台机器；（2）持久化对象：对象被放置在磁盘上，即使程序终⽌，数据依然存在。这些存储的⽅式都是将对象转存于另⼀个介质中，并在需要时恢复成常规的、基于 RAM 的对象。Java 为轻量级持久化提供了⽀持。⽽诸如 JDBC 和 Hibernate 这些类库为使⽤数据库存储和检索对象信息提供了更复杂的⽀持。

## 基本类型的存储

有⼀组类型在 Java 中使⽤频率很⾼，它们需要特殊对待，这就是 Java 的基本类型。之所以这么说，是因为它们的创建并不是通过  new  关键字来产⽣。通常  new  出来的对象都是保存在堆内存中的，以此⽅式创建⼩⽽简单的变量往往是不划算的。所以对于这些基本类型的创建⽅法，Java 使⽤了和 C/C++⼀样的策略。也就是说，不是使⽤  new  创建变量，⽽是使⽤⼀个“⾃动”变量。 这个变量直接存储"值"，并置于栈内存中，因此更加⾼效。
