# 进程控制

## 显示进程(windows)
```bat
tasklist
```
## 停止进程(windows)

```bat
rem 停止tasklist中名称为notepad.exe的进程
TASKKILL /IM notepad.exe
rem 停止进程号1230,1241,1253及子进程
TASKKILL /PID 1230 /PID 1241 /PID 1253 /T
rem 强制停止
TASKKILL /F /IM cmd.exe /T
TASKKILL /F /FI "PID ge 1000" /FI "WINDOWTITLE ne untitle*"
TASKKILL /F /FI "USERNAME eq NT AUTHORITY\SYSTEM" /IM notepad.exe
TASKKILL /S system /U 域\用户名 /FI "用户名 ne NT*" /IM *
TASKKILL /S system /U username /P password /FI "IMAGENAME eq note*"
```

## lsof 获取被进程打开文件的信息
lsof 是 List Open File 的缩写, 它主要用来获取被进程打开文件的信息
```sh
yum install -y lsof

# 输出当前所有活跃进程打开的所有文件
lsof
#  可以获得所有在指定端口号上打开的文件
lsof -i:端口号
```

## ps

```sh
ps [options] [--help]

a 	显示现行终端机下的所有程序，包括其他用户的程序。
-A 	显示所有程序。
c 	列出程序时，显示每个程序真正的指令名称，而不包含路径，参数或常驻服务的标示。
-e 	此参数的效果和指定"A"参数相同。
e 	列出程序时，显示每个程序所使用的环境变量。
f 	用ASCII字符显示树状结构，表达程序间的相互关系。
-H 	显示树状结构，表示程序间的相互关系。
-N 	显示所有的程序，除了执行ps指令终端机下的程序之外。
s 	采用程序信号的格式显示程序状况。
S 	列出程序时，包括已中断的子程序资料。
-t <终端机编号> 指定终端机编号，并列出属于该终端机的程序的状况。
u 	以用户为主的格式来显示程序状况。
x 	显示所有程序，不以终端机来区分。

常用   #
ps aux
ps -ef
```

要对进程进行监测和控制，首先要了解当前进程的情况，也就是需要查看当前进程。

ps 命令就是最基本、也是非常强大的进程查看命令。

使用该命令可以确定有哪些进程正在运行、运行的状态、进程是否结束、进程有没有僵尸、哪些进程占用了过多的资源等。

大部分信息都可以通过执行该命令得到。

最常用的三个参数是 u、a、x。

下面就结合这三个参数详细说明 ps 命令的作用 #ps aux

ps-aux 命令详解
第 2 行代码中，USER 表示进程拥有者；PID 表示进程标示符；%CPU 表示占用的 CPU 使用率；%MEM 占用的物理内存使用率；VSZ 表示占用的虚拟内存大小；RSS 为进程占用的物理内存值；TTY 为终端的次要装置号码。

STAT 表示进程的状态，其中 D 为不可中断的静止（I/O 动作）；R 正在执行中；S 静止状态；T 暂停执行；Z 不存在，但暂时无法消除；W 没有足够的内存分页可分配；高优先序的进程；N 低优先序的进程；L 有内存分页分配并锁在内存体内 (实时系统或 I/O)。

START 为进程开始时间。TIME 为执行的时间。COMMAND 是所执行的指令。

## kill

```
结束进程
 kill -9 {PID}
 killall -9 {p-name}
```

## at

at 命令用来在指定时刻执行指定的命令序列。

```sh
at [-v [-q x] [-f file] [-m] time
主要参数
-V          #显示标准错误输出。
-q          #许多队列输出。
-f          #从文件中读取作业。
-m          #执行完作业后发送电子邮件到用户。
time          #设定作业执行的时间。

time格式有严格的要求，由小时、分钟、日期和时间的偏移量组成，其中日期的格式为MM.DD.YY，MM是分钟，DD是日期，YY是指年份。偏移量的格式为时间＋偏移量，单位是minutes、hours和days。

# at-f data 15:30 +2 days
上面命令表示让系统在两天后的15          #30执行文件data中指明的作业。
```